<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">  
    <title>Excel to JSON | Javacodepoint</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.5/xlsx.min.js"></script>    
  </head>
  <body>

    <button id="uploadButton">upload data</button>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.2/firebase-app.js";
      import { getFirestore, collection, addDoc, doc, setDoc } from "https://www.gstatic.com/firebasejs/9.0.2/firebase-firestore.js";

       // Initialize Firebase with your configuration
       const firebaseConfig = ({
      apiKey: "AIzaSyB1zdPdHi6njKUgiukk-84RVPEzOJFcAxc",
      authDomain: "vit-bus-tracking.firebaseapp.com",
      databaseURL: "https://vit-bus-tracking-default-rtdb.firebaseio.com",
      projectId: "vit-bus-tracking",
      storageBucket: "vit-bus-tracking.appspot.com",
      messagingSenderId: "832936720267",
      appId: "1:832936720267:web:4f170bd4652b5ae10d618e",
      measurementId: "G-5L7PE5VHHX"
      });

      initializeApp(firebaseConfig);
      const db = getFirestore();

      const data =[ {
      "87654": "password1",
    "12345": "password2",
    "baba":"ji",
    "gupi":"putt"
      }];

      async function uploadData() {
        const stu1Ref = collection(db, 'allowedUsers');
        for (let i = 0; i < data.length; i++) {
          const bus=data[i];
          const docRef = doc(stu1Ref, String(i+1));
          await setDoc(docRef, bus);
        }
        console.log('Data uploaded successfully!');
      }

      document.getElementById('uploadButton').addEventListener('click', () => {
        uploadData();
      });
    </script>
  </body>
</html>
